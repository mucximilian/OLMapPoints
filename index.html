<!doctype html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha/css/bootstrap.css" type="text/css">
    <link rel="stylesheet" href="http://openlayers.org/en/v3.17.1/css/ol.css" type="text/css">
    <style>
      #map {
        padding-top: 54px;
        padding-bottom: 0;
        width: 100%;
        height: 100%;
      }
      img.olTileImage {
        max-width: none;
    }
    </style>
    <script src="http://openlayers.org/en/v3.17.1/build/ol.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha/js/bootstrap.js"></script>
    <title>OLMapPoints</title>
  </head>
  <body>
    <nav class="navbar navbar-fixed-top navbar-dark bg-inverse">
      <a class="navbar-brand" href="#">OLMapPoints</a>
      <ul class="nav navbar-nav">
        <li class="nav-item active">
          <a class="nav-link" href="#">Start<span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">End</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Center</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Reset</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Export GeoJSON</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">View OSM</a>
        </li>
      </ul>
    </nav>

    <div id="map" class="map"></div>

    <script type="text/javascript">

      $("#map").height($(window).height() - 50);

      var osm = new ol.layer.Tile({
        source: new ol.source.OSM()
      });

      var source = new ol.source.Vector({wrapX: false});

      var points = new ol.layer.Vector({
        source: source,
        style: new ol.style.Style({
          fill: new ol.style.Fill({
            color: 'rgba(255, 255, 255, 0.2)'
          }),
          stroke: new ol.style.Stroke({
            color: '#ffcc33',
            width: 2
          }),
          image: new ol.style.Circle({
            radius: 7,
            fill: new ol.style.Fill({
              color: '#ffcc33'
            })
          })
        })
      });

      var map = new ol.Map({
        target: 'map',
        layers: [
          osm,
          points       
        ],
        view: new ol.View({
          center: ol.proj.fromLonLat([11.56, 48.12]),
          zoom: 13
        })
      });

      var draw;
      function addInteraction() {

        var geometryFunction;

        draw = new ol.interaction.Draw({
          source: source,
          type: "Point",
          geometryFunction: geometryFunction
        });

        draw.on('drawend', function(evt){
          var feature = evt.feature;
          var p = feature.getGeometry();
          console.log(p.getCoordinates());
        });

        map.addInteraction(draw);          
      }

      addInteraction();

      
    </script>
  </body>
</html>